<template>
<header role="banner" class="app-header">

    <router-link to="/" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 216.58 36.09">
          <g>
            <path d="M9.26 9.59q.25.46.47 1t.45 1q.21-.53.45-1t.48-1L15.76.63A1.47 1.47 0 0 1 16 .28a.86.86 0 0 1 .3-.19 1.24 1.24 0 0 1 .37-.09h3.69v17.66h-3.7V7.5q0-.74.07-1.6l-4.8 9.1a1.54 1.54 0 0 1-.61.64 1.67 1.67 0 0 1-.86.22h-.57a1.74 1.74 0 0 1-.89-.24 1.57 1.57 0 0 1-.6-.64L3.6 5.89q0 .42.07.85t0 .76v10.16H0V0h3.68a1.27 1.27 0 0 1 .37.07.75.75 0 0 1 .29.19 1.28 1.28 0 0 1 .26.37z"/>
            <path d="M40.21 17.66H37a1.59 1.59 0 0 1-.91-.24 1.33 1.33 0 0 1-.48-.64L31 3.64l-4.46 13.13a1.4 1.4 0 0 1-.48.62 1.44 1.44 0 0 1-.88.27h-3.29L28.9 0h4.3z"/>
            <path d="M45.89 11.12v6.53h-4.2V0h5.89a12.14 12.14 0 0 1 3.34.4 6.21 6.21 0 0 1 2.26 1.09 4.14 4.14 0 0 1 1.28 1.66 5.38 5.38 0 0 1 .4 2.08 5.47 5.47 0 0 1-.24 1.62 4.86 4.86 0 0 1-.71 1.42 5.24 5.24 0 0 1-1.14 1.15 6 6 0 0 1-1.55.84 3.8 3.8 0 0 1 .78.51 3 3 0 0 1 .65.74l3.85 6.14h-3.8a1.62 1.62 0 0 1-1.52-.78l-3-5.13a1.23 1.23 0 0 0-.47-.48 1.55 1.55 0 0 0-.75-.15zm0-2.82h1.69A4.49 4.49 0 0 0 49 8.09a2.71 2.71 0 0 0 1-.59 2.24 2.24 0 0 0 .56-.87 3.35 3.35 0 0 0 .17-1.09A2.24 2.24 0 0 0 50 3.72a3.66 3.66 0 0 0-2.4-.65h-1.71z"/>
            <path d="M70.62 0v3.25h-5.1v14.41h-4.2V3.25h-5.1V0z"/>
            <path d="M76.95 17.66h-4.23V0h4.23z"/>
            <path d="M88 11.26a8.85 8.85 0 0 1-.39 2.69A5.58 5.58 0 0 1 86.49 16a5.17 5.17 0 0 1-1.91 1.35 7.17 7.17 0 0 1-2.72.47 13.5 13.5 0 0 1-1.4-.07 12.35 12.35 0 0 1-1.46-.22l.22-2.39a.72.72 0 0 1 .25-.51 1 1 0 0 1 .65-.19 2.36 2.36 0 0 1 .52.07 4 4 0 0 0 .75.06 3.19 3.19 0 0 0 1.06-.16 1.7 1.7 0 0 0 .76-.55 2.65 2.65 0 0 0 .45-1 6.63 6.63 0 0 0 .15-1.53V0H88z"/>
            <path d="M93.21 0h.46a1.08 1.08 0 0 1 .34.1 1 1 0 0 1 .29.18 3.21 3.21 0 0 1 .31.33l8.6 10.6q0-.51-.07-1t0-.91V0h3.7v17.66h-2.19a2.06 2.06 0 0 1-.82-.15 1.74 1.74 0 0 1-.65-.53L94.61 6.46q0 .46.06.91t0 .82v9.46H91V0z"/>
            <path d="M131 8.82a9 9 0 0 1-.68 3.54 8.24 8.24 0 0 1-1.9 2.8 8.79 8.79 0 0 1-3 1.84 10.76 10.76 0 0 1-3.84.65h-7V0h7a10.59 10.59 0 0 1 3.84.67 8.79 8.79 0 0 1 3 1.84 8.09 8.09 0 0 1 1.9 2.8 8.9 8.9 0 0 1 .68 3.51zm-4.3 0a7.51 7.51 0 0 0-.35-2.36 4.9 4.9 0 0 0-1-1.78 4.2 4.2 0 0 0-1.59-1.13 5.47 5.47 0 0 0-2.15-.4h-2.81v11.36h2.81a5.63 5.63 0 0 0 2.15-.39 4.38 4.38 0 0 0 1.61-1.12 5 5 0 0 0 1-1.79 7.56 7.56 0 0 0 .35-2.39z"/>
            <path d="M144.7 0v3.15h-7.43v4.12H143v3h-5.69v4.2h7.43v3.15H133V0z"/>
            <path d="M150.41 0h3.38a1.53 1.53 0 0 1 .89.24 1.34 1.34 0 0 1 .5.64l3.51 9.45q.24.62.47 1.35t.46 1.53q.17-.8.4-1.53t.46-1.35L164 .88a1.34 1.34 0 0 1 .49-.61 1.4 1.4 0 0 1 .88-.28h3.41l-7.26 17.66h-3.8z"/>
            <path d="M184.62 17.66h-3.26a1.59 1.59 0 0 1-.91-.24 1.33 1.33 0 0 1-.48-.64l-4.51-13.14-4.51 13.14a1.41 1.41 0 0 1-.48.62 1.45 1.45 0 0 1-.88.27h-3.28l7-17.66h4.3z"/>
            <path d="M190.29 14.38H197v3.27h-10.91V0h4.2z"/>
            <path d="M203.18 7.15h.67a1.54 1.54 0 0 0 1.34-.57l4.08-5.77a1.75 1.75 0 0 1 .73-.64 2.91 2.91 0 0 1 1.09-.17h3.65l-5.37 7.14a3.55 3.55 0 0 1-.6.64 3.74 3.74 0 0 1-.63.42 3 3 0 0 1 .86.47 3 3 0 0 1 .72.79l5.47 8.19h-3.75a3.44 3.44 0 0 1-.62 0 1.6 1.6 0 0 1-.43-.15 1.36 1.36 0 0 1-.32-.23 2.74 2.74 0 0 1-.26-.33l-4.1-6.14a1.18 1.18 0 0 0-.57-.47 2.37 2.37 0 0 0-.92-.15h-1v7.51H199V0h4.2z"/>
          </g>
          <path fill="currentColor" d="M79.87 28v3.57h3.87v.51h-3.87V36h-.62v-8.49h5.09V28zm8.24 3.68a3.54 3.54 0 0 0 1-.13 2.18 2.18 0 0 0 .76-.39 1.66 1.66 0 0 0 .47-.61 1.9 1.9 0 0 0 .16-.8 1.56 1.56 0 0 0-.59-1.34A2.86 2.86 0 0 0 88.2 28h-1.55v3.7zM91.88 36h-.53a.45.45 0 0 1-.17 0 .38.38 0 0 1-.13-.13l-2.72-3.47-.1-.11a.31.31 0 0 0-.11-.07h-1.47V36H86v-8.49h2.2a3.51 3.51 0 0 1 2.19.57 2 2 0 0 1 .73 1.66 2.28 2.28 0 0 1-.17.89 2.09 2.09 0 0 1-.49.71 2.5 2.5 0 0 1-.76.49 3.57 3.57 0 0 1-1 .26 1 1 0 0 1 .26.24zm8.93-4.25a5.17 5.17 0 0 1-.29 1.79 4 4 0 0 1-.83 1.37 3.7 3.7 0 0 1-1.28.88 4.57 4.57 0 0 1-3.29 0 3.72 3.72 0 0 1-1.28-.88 4 4 0 0 1-.84-1.37 5.17 5.17 0 0 1-.29-1.79A5.11 5.11 0 0 1 93 30a3.92 3.92 0 0 1 .83-1.37 3.68 3.68 0 0 1 1.28-.88 4.49 4.49 0 0 1 3.29 0 3.6 3.6 0 0 1 1.28.88 4 4 0 0 1 .83 1.37 5.11 5.11 0 0 1 .3 1.75zm-.64 0a4.84 4.84 0 0 0-.25-1.6 3.41 3.41 0 0 0-.7-1.2 3 3 0 0 0-1.08-.75 3.79 3.79 0 0 0-2.78 0 3 3 0 0 0-1.09.75 3.48 3.48 0 0 0-.7 1.2 5.32 5.32 0 0 0 0 3.2 3.49 3.49 0 0 0 .7 1.19 3 3 0 0 0 1.09.75 3.87 3.87 0 0 0 2.78 0 3 3 0 0 0 1.08-.75 3.42 3.42 0 0 0 .7-1.19 4.86 4.86 0 0 0 .26-1.6zm9.14-4.24V36h-.44a.36.36 0 0 1-.1-.1l-5.51-7.37V36h-.54v-8.49h.31a.26.26 0 0 1 .13 0 .25.25 0 0 1 .1.09l5.54 7.4v-7.49zm8 .52h-3v8h-.62V28h-3v-.52h6.6zm.28 4.16h2.79v.49h-2.79zm10 3.29V36h-5.09v-8.49h5.09V28h-4.49v3.43h3.72v.5h-3.72v3.54zm8.41-8V36h-.42a.36.36 0 0 1-.1-.1L130 28.51V36h-.54v-8.49h.31a.26.26 0 0 1 .13 0 .25.25 0 0 1 .1.09l5.5 7.35V27.51zm9.66 4.24a5 5 0 0 1-.29 1.77 3.82 3.82 0 0 1-.83 1.34 3.58 3.58 0 0 1-1.28.85 4.44 4.44 0 0 1-1.64.29h-3.1v-8.46h3.1a4.44 4.44 0 0 1 1.64.29 3.58 3.58 0 0 1 1.28.85 3.82 3.82 0 0 1 .83 1.34 5 5 0 0 1 .29 1.76zm-.64 0a4.74 4.74 0 0 0-.25-1.58 3.3 3.3 0 0 0-.7-1.18 3 3 0 0 0-1.08-.73 3.72 3.72 0 0 0-1.39-.25h-2.48v7.52h2.48a3.72 3.72 0 0 0 1.39-.25 3 3 0 0 0 1.08-.73 3.3 3.3 0 0 0 .7-1.18 4.76 4.76 0 0 0 .23-1.59zm13 0a5 5 0 0 1-.29 1.77 3.82 3.82 0 0 1-.83 1.34 3.58 3.58 0 0 1-1.28.85A4.44 4.44 0 0 1 154 36h-3.1v-8.49h3.1a4.44 4.44 0 0 1 1.64.29 3.58 3.58 0 0 1 1.28.85 3.82 3.82 0 0 1 .83 1.34 5 5 0 0 1 .25 1.76zm-.64 0a4.74 4.74 0 0 0-.25-1.58 3.3 3.3 0 0 0-.7-1.18 3 3 0 0 0-1.08-.73A3.72 3.72 0 0 0 154 28h-2.5v7.5h2.5a3.72 3.72 0 0 0 1.39-.25 3 3 0 0 0 1.08-.73 3.3 3.3 0 0 0 .7-1.18 4.76 4.76 0 0 0 .22-1.59zm7.7 3.74V36H160v-8.49h5.09V28h-4.47v3.43h3.72v.5h-3.72v3.54zm8.32-8L169.91 36h-.55l-3.5-8.49h.49a.2.2 0 0 1 .14 0 .27.27 0 0 1 .08.11l2.89 7 .1.28.09.31.08-.31a2.59 2.59 0 0 1 .1-.28l2.89-7a.26.26 0 0 1 .08-.11.22.22 0 0 1 .14 0zm6.51 8V36h-5.09v-8.49h5.09V28h-4.47v3.43h3.72v.5h-3.72v3.54zm6.5 0V36h-4.64v-8.49h.62v8zm8.46-3.73a5.17 5.17 0 0 1-.29 1.79 4 4 0 0 1-.83 1.37 3.7 3.7 0 0 1-1.28.88 4.57 4.57 0 0 1-3.29 0 3.72 3.72 0 0 1-1.28-.88 4 4 0 0 1-.83-1.37 5.17 5.17 0 0 1-.29-1.79 5.11 5.11 0 0 1 .29-1.78 3.92 3.92 0 0 1 .83-1.37 3.68 3.68 0 0 1 1.28-.88 4.49 4.49 0 0 1 3.29 0 3.6 3.6 0 0 1 1.28.88 4 4 0 0 1 .83 1.37 5.11 5.11 0 0 1 .3 1.8zm-.64 0a4.84 4.84 0 0 0-.25-1.6 3.41 3.41 0 0 0-.7-1.2 3 3 0 0 0-1.08-.75 3.79 3.79 0 0 0-2.78 0 3 3 0 0 0-1.09.75 3.48 3.48 0 0 0-.7 1.2 5.32 5.32 0 0 0 0 3.2 3.49 3.49 0 0 0 .7 1.19 3 3 0 0 0 1.09.75 3.87 3.87 0 0 0 2.78 0 3 3 0 0 0 1.08-.75 3.42 3.42 0 0 0 .7-1.19 4.86 4.86 0 0 0 .26-1.58zm4.78.34a3 3 0 0 0 1-.16 2.19 2.19 0 0 0 .75-.43 1.84 1.84 0 0 0 .47-.65 2 2 0 0 0 .17-.82 1.9 1.9 0 0 0-.6-1.51 2.65 2.65 0 0 0-1.8-.5h-1.58v4.09zm0-4.58a3.36 3.36 0 0 1 2.25.65A2.32 2.32 0 0 1 202 30a2.48 2.48 0 0 1-.21 1 2.34 2.34 0 0 1-.6.81 2.86 2.86 0 0 1-.95.53 4 4 0 0 1-1.25.19h-1.58V36h-.62v-8.49zm9.84 8V36h-5.09v-8.49h5.09V28h-4.47v3.43h3.72v.5h-3.72v3.54zm3.95-3.79a3.54 3.54 0 0 0 1-.13 2.18 2.18 0 0 0 .76-.39 1.66 1.66 0 0 0 .47-.61 1.9 1.9 0 0 0 .16-.8 1.56 1.56 0 0 0-.59-1.34 2.86 2.86 0 0 0-1.7-.43h-1.55v3.7zm3.77 4.3h-.53a.45.45 0 0 1-.17 0 .38.38 0 0 1-.13-.13L213 32.4l-.1-.11a.31.31 0 0 0-.11-.07h-1.47V36h-.62v-8.49h2.17a3.51 3.51 0 0 1 2.19.57 2 2 0 0 1 .73 1.66 2.28 2.28 0 0 1-.17.89 2.09 2.09 0 0 1-.49.71 2.5 2.5 0 0 1-.76.49 3.57 3.57 0 0 1-1 .26 1 1 0 0 1 .26.24z" />
        </svg>
    </router-link>

    <nav role="navigation" class="main-nav" :class="{ active: menuIsActive }">
        <div class="main-nav__wrap">
            <router-link to="/Projects" @click.native="hideMenu">Projects</router-link>
            <router-link to="/Photography" @click.native="hideMenu">Photography</router-link>
            <router-link to="/Animations" @click.native="hideMenu">Animations</router-link>
            <router-link to="/Cinemagraphs" @click.native="hideMenu">Cinemagraphs</router-link>
            <router-link to="/Videos" @click.native="hideMenu">Videos</router-link>
        </div>
    </nav>

    <button type="button" name="button" class="menu" @click="toggleMenu" :class="{ active: menuIsActive }">
        <span class="line line--top"></span>
        <span class="line line--middle"></span>
        <span class="line line--bottom"></span>
    </button>

</header>
</template>

<script>
import { TweenLite, Power4, TimelineLite } from 'gsap';

export default {
    data: function () {
        return {
            menuBtn: '.menu',
            mainNav: '.main-nav',
            menuIsActive: false,
            TweenLite,
            pageTrans: '#page-trans',
            pageTransSpeed: 0.6,
            showMenuTl: new TimelineLite(),
            hideMenuTl: new TimelineLite()
            // mediaQuery: window.matchMedia('(min-width: 1024px)')
        };
    },
    mounted: function () {
        // this.mediaQuery.addListener(this.resetMenu);
    },
    methods: {
        toggleMenu: function () {
            this.menuIsActive = !this.menuIsActive;

            if (this.menuIsActive === true) {
                this.showMenu();
            } else {
                this.hideMenu();
            }
        },
        showMenu: function () {
            this.menuIsActive = true;

            this.showMenuTl
            .set(this.pageTrans, { transformOrigin: '0% 0%' })
            .fromTo(this.pageTrans, this.pageTransSpeed, { scaleX: 0 }, { scaleX: 1, ease: Power4.easeOut })
            .set(this.pageTrans, { transformOrigin: '100% 0%' })
            .set(this.mainNav, { autoAlpha: 1 })
            .fromTo(this.pageTrans, this.pageTransSpeed, { scaleX: 1 }, { scaleX: 0, ease: Power4.easeOut })
            .staggerFromTo('.main-nav a', 1, { y: '100%' }, { y: '0%' }, 0.1, '-=1.0');
        },
        hideMenu: function () {
            this.menuIsActive = false;

            this.hideMenuTl
            .set(this.pageTrans, { transformOrigin: '100% 0%' })
            .fromTo(this.pageTrans, this.pageTransSpeed, { scaleX: 0 }, { scaleX: 1, ease: Power4.easeOut })
            .set(this.pageTrans, { transformOrigin: '0% 0%' })
            .set(this.mainNav, { autoAlpha: 0 })
            .fromTo(this.pageTrans, this.pageTransSpeed, { scaleX: 1 }, { scaleX: 0, ease: Power4.easeOut });
        }
        // resetMenu: function () {
        //     if (this.menuIsActive === true) {
        //         this.menuIsActive = false;
        //         this.menuTl.set(this.mainNav, { clearProps: 'all' });
        //     }
        // }
    }
};
</script>

<style lang="scss">

$menuBtnHeight: 40px;
$menuBtnWidth: 40px;

.app-header {
    margin: 0 auto;
    padding: 0 2rem;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 20px;
    position: sticky;
    top: 0;
    align-content: center;

    // Site logo
    .logo {
        padding: 2rem 0;
        min-width: 150px;
        max-width: 300px;
        grid-column: 1/2;
        fill: $space-cadet;
        color: $queen-blue;
    }

    // Hamburger menu
    .menu {
        padding: 0;
        grid-column: 2/2;
        width: $menuBtnWidth;
        height: $menuBtnHeight;
        border: none;
        cursor: pointer;
        background: none;
        align-self: center;
        justify-self: end;
        position: relative;
        z-index: 900;
        transition: transform 300ms ease-out;
        color: $space-cadet;

        .line {
            left: 0;
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: currentColor;
            transition: all 300ms ease-out;
            transform-origin: center center;
            &--top {
                top: 6px;
            }
            &--middle {
                top: calc(50% - 1px);
            }
            &--bottom {
                bottom: 6px;
            }
        }

        &:hover {
            .line {
                &--top {
                    transform: translateY(4px);
                }
                &--middle {
                    transform: scaleX(0.8);
                }
                &--bottom {
                    transform: translateY(-4px);
                }
            }
        }

        &.active {
            color: $honeydew;
            transform: rotate(180deg);
            .line {
                &--top {
                    transform: translateY(12px) rotate(45deg);
                }
                &--middle {
                    opacity: 0;
                }
                &--bottom {
                    transform: translateY(-14px) rotate(-45deg);
                }
            }
            &:hover {
                transform: rotate(180deg) scale(0.9);
            }
        }
    }

    // Main nav
    .main-nav {
        position: fixed;
        top: 0;
        left: 0;
        visibility: hidden;
        opacity: 0;
        z-index: 800;
        width: 100vw;
        height: 100vh;
        background-color: $space-cadet;
        text-align: center;

        &__wrap {
            display: inline-flex;
            flex-direction: column;
            height: 100vh;
            list-style: none;
        }

        a {
            margin: auto 2rem;
            text-transform: uppercase;
            text-decoration: none;
            font-size: 3vw;
            font-weight: 100;
            color: $honeydew;
            position: relative;
            outline: 0;

            &::after {
                content: '';
                height: 50%;
                width: 110%;
                background-color: $desire;
                position: absolute;
                bottom: -5%;
                left: -5%;
                z-index: -1;
                transform: scaleX(0);
                transform-origin: bottom center;
                transition: transform 400ms ease;
            }

            &:hover,
            &:focus,
            &.is-active {
                &::after {
                    transform: scaleX(1);
                }
            }
        }
    }
}

</style>
